<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Перенаправление — Evrocontayner</title>
  <meta http-equiv="refresh" content="0; url=/contact/">
  <link rel="canonical" href="https://evrocontayner.kz/contact/">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fb;
      color: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }
    a { color: #2563eb; }
  </style>
</head>
<body>
  <p>Переадресация... Если ничего не происходит, перейдите на <a href="/contact/">/contact/</a>.</p>
  <script>
    window.location.replace('/contact/');
  </script>
</body>
</html>
        <a href="/services/" data-tooltip="Услуги">
            <span class="icon" aria-hidden="true">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 2l-4 4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M14 2l8 8-5 5-8-8 5-5z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M3 21c0-3 2-6 6-6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </span>
            <span class="label" data-i18n="sidebar.services">Услуги</span>
        </a>
        <a href="/gallery/" data-tooltip="Галерея">
            <span class="icon" aria-hidden="true">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="4" width="20" height="16" rx="2" stroke="currentColor" stroke-width="1.4" />
                    <circle cx="8" cy="9" r="1.6" fill="currentColor" />
                    <path d="M21 18l-6-6-5 5-3-3-4 4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"
                        stroke-linejoin="round" fill="none" />
                </svg>
            </span>
            <span class="label" data-i18n="sidebar.gallery">Галерея</span>
        </a>
        <a href="/products/" data-tooltip="Продукция">
            <span class="icon" aria-hidden="true">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73L13 2 4 6.27V16a2 2 0 0 0 1 1.73L11 22l8-4.27A2 2 0 0 0 21 16z"
                        stroke="currentColor" stroke-width="1.2" stroke-linejoin="round" fill="none" />
                    <path d="M12 7v6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" />
                </svg>
            </span>
            <span class="label" data-i18n="sidebar.products">Продукция</span>
        </a>
        <a href="/about/" data-tooltip="О нас">
            <span class="icon" aria-hidden="true">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.4" />
                    <path d="M12 8h.01" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                    <path d="M11.5 11h1v5h-1z" fill="currentColor" />
                </svg>
            </span>
            <span class="label" data-i18n="sidebar.about">О нас</span>
        </a>
        <a href="/" data-tooltip="На главную">
            <span class="icon" aria-hidden="true">
                <svg class="icon-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7" stroke="currentColor" stroke-width="1.4"
                        stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M3 7l9 6 9-6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"
                        stroke-linejoin="round" fill="none" />
                </svg>
            </span>
            <span class="label">Главная</span>
        </a>
    </div>

    <main>
        <a href="/" class="back-button" data-i18n="back.home">← Вернуться на главную</a>
        <section id="contact-page">
            <h2 data-i18n="contact.title">Связаться с нами</h2>
            
            <!-- Auth status widget -->
            <div id="auth-widget" style="display: none; margin-bottom: 20px; padding: 14px; background: var(--bg-secondary); border-radius: 8px; border-left: 4px solid var(--accent-color);">
              <p style="margin: 0 0 10px 0; color: var(--text-secondary);">📋 Ваши данные</p>
              <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
                <div>
                  <p style="margin: 0; color: var(--text-primary); font-weight: 600;" id="auth-name"></p>
                  <p style="margin: 4px 0 0 0; color: var(--text-secondary); font-size: 0.9rem;" id="auth-email"></p>
                </div>
                <button id="auth-logout-btn" type="button" style="margin-left: auto; padding: 6px 12px; background: transparent; border: 1px solid var(--border-color); border-radius: 4px; cursor: pointer; font-size: 0.85rem; transition: all 0.2s ease;">Выход</button>
              </div>
            </div>

            <!-- Login/Register buttons -->
            <div id="auth-buttons" class="auth-container" style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
              <a href="/login/" class="nav-btn auth-split" style="text-decoration: none; text-align: center; flex: 1; min-width: 140px; display: inline-block;">🔐 Вход</a>
              <a href="/register/" class="nav-btn auth-split" style="text-decoration: none; text-align: center; flex: 1; min-width: 140px; display: inline-block;">📝 Регистрация</a>
            </div>

            <form id="contact-form" class="contact-form">
                <input id="cf-name" name="name" type="text" placeholder="Ваше имя" data-i18n="form.name" required>
                <input id="cf-email" name="email" type="email" placeholder="Email" data-i18n="form.email" required>
                <textarea id="cf-message" name="message" rows="5" placeholder="Сообщение" data-i18n="form.message" required></textarea>
                <button id="cf-submit" type="submit" data-i18n="form.submit">Отправить</button>
                <div id="contact-status" aria-live="polite" style="margin-top:10px"></div>
            </form>
        </section>

        <!-- CONTACT INFO -->
        <section id="contact-info" class="card">
            <h2>Контакты</h2>
            <div class="info-cards">
                <a href="tel:+77786804030" class="info-cell">📞 +7 778 680 4030</a>
                <a href="https://wa.me/77786804030" class="info-cell" target="_blank">💬 WhatsApp</a>
                <a href="mailto:info@evrocontayner.kz" class="info-cell">📧 Email</a>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-content">
                        <h3>
                            <a href="/terms/" data-i18n="footer.terms">Условия пользования</a>
                            <button class="cookie-settings-inline" aria-label="Настройки cookie">Настройки cookie</button>
                        </h3>
            <div class="footer-sections">
                <div class="footer-section">


                </div>
            </div>
            <div class="footer-copyright">
                <p data-i18n="footer.copy">&copy; 2026 TOO Evrocontayner</p>
            </div>
        </div>
    </footer>


    <script src="static/catalog.js"></script>
    <script src="static/cookie-consent.js"></script>
    <script src="static/auth-combined.js"></script>
    <script src="static/i18n.js" defer></script>
    <script src="static/theme-toggle.js" defer></script>
    <script src="static/lang-toggle.js" defer></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const form = document.getElementById('contact-form');
                const status = document.getElementById('contact-status');
                const submitBtn = document.getElementById('cf-submit');
                const nameFld = document.getElementById('cf-name');
                const emailFld = document.getElementById('cf-email');
                const authWidget = document.getElementById('auth-widget');
                const authButtons = document.getElementById('auth-buttons');
                const logoutBtn = document.getElementById('auth-logout-btn');

                // Check if user is logged in
                const sessionToken = localStorage.getItem('sessionToken');
                const userStr = localStorage.getItem('user');
                
                if (sessionToken && userStr) {
                    try {
                        const user = JSON.parse(userStr);
                        // Show auth widget and hide login buttons
                        authWidget.style.display = 'block';
                        authButtons.style.display = 'none';
                        
                        // Populate auth widget
                        document.getElementById('auth-name').textContent = user.name || 'Пользователь';
                        document.getElementById('auth-email').textContent = user.email || '';
                        
                        // Auto-fill form with user data
                        nameFld.value = user.name || '';
                        nameFld.readOnly = true;
                        emailFld.value = user.email || '';
                        emailFld.readOnly = true;
                        
                        // Logout handler
                        logoutBtn.addEventListener('click', async () => {
                            await fetch('/api/logout', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ sessionToken })
                            });
                            localStorage.removeItem('sessionToken');
                            localStorage.removeItem('user');
                            window.location.reload();
                        });
                    } catch (e) {
                        console.error('Error parsing user data:', e);
                    }
                } else {
                    // Show login buttons if no session
                    authWidget.style.display = 'none';
                    authButtons.style.display = 'flex';
                }

                form.addEventListener('submit', async function (e) {
                    e.preventDefault();
                    status.textContent = '';
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Отправка...';

                    const payload = {
                        name: nameFld.value.trim(),
                        email: emailFld.value.trim(),
                        message: document.getElementById('cf-message').value.trim()
                    };

                    try {
                        const res = await fetch('/send', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        const raw = await res.text();
                        let data = null;
                        try {
                            data = raw ? JSON.parse(raw) : null;
                        } catch (e) {
                            data = { error: raw };
                        }

                        if (res.ok) {
                            status.style.color = 'green';
                            status.textContent = (data && data.ok) ? 'Сообщение успешно отправлено.' : 'Сообщение отправлено.';
                            if (!sessionToken) form.reset();
                        } else {
                            status.style.color = 'crimson';
                            status.textContent = (data && data.error) ? data.error : (raw || 'Ошибка сервера. Проверьте консоль сервера.');
                        }
                    } catch (err) {
                        status.style.color = 'crimson';
                        status.textContent = 'Ошибка отправки: ' + err.message;
                    } finally {
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Отправить';
                    }
                });
            });
        </script>
    <script src="static/mobile-menu.js" defer></script>
</body>

</html>